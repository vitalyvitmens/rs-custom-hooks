# React. 3. Пользовательские хуки



## Задача №1
### Действия по выполнению кода с пользовательским хуком useFetch и компонентом Task1:

#### Пользовательский хук useFetch принимает url и опции для запроса к API с помощью fetch. Он возвращает объект с данными, статусом загрузки, ошибкой, новыми опциями и функцией refetch.

#### Хук useFetch использует хук useLayoutEffect, чтобы выполнить запрос к API при изменении url или новых опций. Он также использует контроллер запроса, чтобы отменить предыдущий запрос, если он еще не завершен, или если компонент размонтирован.

#### Хук useFetch обрабатывает разные сценарии ответа от API: успешный, неуспешный или отмененный. Он сохраняет данные, статус загрузки и ошибку в соответствующие состояния с помощью хука useState.

#### Хук useFetch также предоставляет функцию refetch, которая позволяет обновить новые опции для запроса и вызвать хук useLayoutEffect снова, если нужно изменить параметры запроса и повторить запрос при нажатии на кнопку.

#### Компонент Task1 использует хук useFetch с url, который возвращает список posts. Он также использует хук useLayoutEffect, чтобы добавить новые опции к url при изменении их в хуке useFetch.

#### Компонент Task1 рендерит кнопку, которая вызывает функцию refetch с параметром _limit: 3. Это ограничивает количество posts = 3, которые возвращаются от API. Компонент также рендерит состояния загрузки и ошибки, а также список posts, если данные получены.



## Задача №2
### Действия по выполнению кода с пользовательским хуком useLocalStorage и компонентом Task2:

####  Создал пользовательский хук useLocalStorage, который позволяет сохранять и получать значение из localStorage в функциональных компонентах React.

####  Проверил, что localStorage доступен в браузере, используя функцию isLocalStorageAvailable, которая пытается записать и удалить тестовый ключ в localStorage и возвращает true или false в зависимости от результата. Если localStorage не доступен, ьросает ошибку с сообщением localStorage is not available.

####  Использовал хук useState для создания состояния value, которое хранит значение из localStorage по ключу storageKey. Передал функцию в качестве начального значения, которая пытается получить и распарсить значение из localStorage, или возвращает initialState, если значение не существует.

####  Создал объект methods, который содержит два метода для управления значением в localStorage: setItem и removeItem. Метод setItem принимает новое значение, обновляет состояние value и записывает новое значение в localStorage в формате JSON. Метод removeItem удаляет значение из состояния value и из localStorage по ключу storageKey.

####  Использовал хук useEffect для синхронизации значения в localStorage с другими вкладками браузера. Создал функцию handleStorageChange, которая принимает объект события, содержащий ключ, старое и новое значение, и обновляет состояние value в соответствии с новым значением, если ключ совпадает с storageKey. Добавил обработчик события storage при монтировании компонента, используя window.addEventListener, и удаляет его при размонтировании компонента, используя window.removeEventListener. Передал storageKey в качестве зависимости хука useEffect, чтобы он вызывался при изменении ключа.

####  Вернул массив с двумя элементами из хука useLocalStorage: value и methods. Это позволяет получить доступ к значению и методам для управления им при вызове хука в других компонентах.

####  Создал компонент Task2, который использует хук useLocalStorage с ключом token и начальным значением null. Деструктурировал массив, возвращенный хуком, на: token и { setItem, removeItem }. Переменная token содержит значение из localStorage, а объект { setItem, removeItem } содержит методы для управления значением.

####  Вернул JSX-разметку компонента Task2, которая отображает заголовок, параграф с токеном, и две кнопки для задания и удаления токена. Я использовал компонент Button из src\components\Button.jsx и стили из src\components\tasks.module.css. Добавил обработчики событий onClick для кнопок, которые вызывают методы setItem и removeItem с аргументами new-token и null соответственно.
